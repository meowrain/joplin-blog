<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>graphic-driver | 知识库</title><meta name="author" content="Public"><meta name="copyright" content="Public"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="referrer" content="no-referrer"><meta name="description" content="archlinux 显卡驱动 🪁 接天莲叶无穷碧，映日荷花别样红近年来，archlinux 的显卡驱动安装已经变得非常容易。本小节区分核芯显卡、独立显卡和双显卡（核显 + 独显）三大类讨论 archlinux 显卡驱动的安装   🔖 这一节将会讨论：::: details 目录 [[toc]] :::  所有 AMD 显卡建议使用开源驱动，英伟达显卡建议使用闭源驱动。 ::: tip ℹ️ 提">
<meta property="og:type" content="article">
<meta property="og:title" content="graphic-driver">
<meta property="og:url" content="http://example.com/2023/02/01/ab3bf8adc2aa447399b5ab999c14766a/index.html">
<meta property="og:site_name" content="知识库">
<meta property="og:description" content="archlinux 显卡驱动 🪁 接天莲叶无穷碧，映日荷花别样红近年来，archlinux 的显卡驱动安装已经变得非常容易。本小节区分核芯显卡、独立显卡和双显卡（核显 + 独显）三大类讨论 archlinux 显卡驱动的安装   🔖 这一节将会讨论：::: details 目录 [[toc]] :::  所有 AMD 显卡建议使用开源驱动，英伟达显卡建议使用闭源驱动。 ::: tip ℹ️ 提">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://meowrain.cn/upload/2022/11/QQ%E5%9B%BE%E7%89%8720221127155827.jpg">
<meta property="article:published_time" content="2023-02-01T04:57:59.107Z">
<meta property="article:modified_time" content="2023-02-01T04:57:59.107Z">
<meta property="article:author" content="Public">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://meowrain.cn/upload/2022/11/QQ%E5%9B%BE%E7%89%8720221127155827.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2023/02/01/ab3bf8adc2aa447399b5ab999c14766a/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'graphic-driver',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-02-01 12:57:59'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = url => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      link.onload = () => resolve()
      link.onerror = () => reject()
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><script>if (location.pathname.endsWith('/')) {location += 'index.html';}</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://meowrain.cn/upload/2022/11/QQ%E5%9B%BE%E7%89%8720221127155827.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">495</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">47</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="知识库"><span class="site-name">知识库</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">graphic-driver</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-02-01T04:57:59.107Z" title="发表于 2023-02-01 12:57:59">2023-02-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-02-01T04:57:59.107Z" title="更新于 2023-02-01 12:57:59">2023-02-01</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/Arch-Linux/">Arch-Linux</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/Arch-Linux/advanced/">advanced</a></span></div><div class="meta-secondline"></div></div></div><article class="post-content" id="article-container"><h1 id="archlinux-显卡驱动"><a href="#archlinux-显卡驱动" class="headerlink" title="archlinux 显卡驱动"></a>archlinux 显卡驱动</h1><blockquote>
<h3 id="🪁-接天莲叶无穷碧，映日荷花别样红"><a href="#🪁-接天莲叶无穷碧，映日荷花别样红" class="headerlink" title="🪁 接天莲叶无穷碧，映日荷花别样红"></a>🪁 接天莲叶无穷碧，映日荷花别样红</h3><p>近年来，archlinux 的显卡驱动安装已经变得非常容易。本小节区分核芯显卡、独立显卡和双显卡（核显 + 独显）三大类讨论 archlinux 显卡驱动的安装</p>
</blockquote>
<blockquote>
<h3 id="🔖-这一节将会讨论："><a href="#🔖-这一节将会讨论：" class="headerlink" title="🔖 这一节将会讨论："></a>🔖 这一节将会讨论：</h3><p>::: details 目录</p>
<p>[[toc]]</p>
<p>:::</p>
</blockquote>
<p>所有 AMD 显卡建议使用开源驱动，英伟达显卡建议使用闭源驱动。</p>
<p>::: tip ℹ️ 提示</p>
<p>进行本小节内容时建议按照步骤 <a href="./desktop-env-and-app.md#_12-%E8%AE%BE%E7%BD%AE-timeshift-%E5%BF%AB%E7%85%A7">12. 设置 Timeshift 快照</a> 设置了 Timeshift 快照，并且已经有至少一张快照。</p>
<p>:::</p>
<p>::: tip ℹ️ 提示</p>
<p>虚拟机不需要安装显卡驱动。</p>
<p>:::</p>
<p>::: tip ℹ️ 提示</p>
<p>若在设置过程中导致黑屏无法进入桌面，请尝试使用使用 <code>Ctrl</code> + <code>Alt</code> + <code>F1 ~ F6</code> 在 <code>tty1 ~ tty6</code> 之间切换。</p>
<p>将导致黑屏的配置删掉或使用快照恢复后重新启动电脑。</p>
<p>:::</p>
<p>::: warning ⚠️ 注意</p>
<p>请确保已经按照本指南之前的章节安装配置好系统再向下进行，<strong>不要多个教程混着看（尤其是一些过时的教程）</strong>。因为可能导致漏掉本指南前置步骤中的某些操作，从而造成问题。</p>
<p>:::</p>
<h2 id="核芯显卡"><a href="#核芯显卡" class="headerlink" title="核芯显卡"></a>核芯显卡</h2><h3 id="Intel-核芯显卡"><a href="#Intel-核芯显卡" class="headerlink" title="Intel 核芯显卡"></a>Intel 核芯显卡</h3><p>如有需要可以参阅 <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Intel_graphics">archWiki 相关内容</a>。</p>
<p>通过以下命令安装如下几个包即可：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S mesa lib32-mesa vulkan-intel lib32-vulkan-intel</span><br></pre></td></tr></table></figure>

<p>::: tip ℹ️ 提示</p>
<p>不建议安装 <code>xf86-video-intel</code>，而应使用 Xorg 的 modesetting 驱动（也就是什么都不用装的意思）</p>
<p>注意，只有 Intel HD 4000 及以上的核显才支持 vulkan。</p>
<p>:::</p>
<h3 id="AMD-核芯显卡"><a href="#AMD-核芯显卡" class="headerlink" title="AMD 核芯显卡"></a>AMD 核芯显卡</h3><p>如有需要可以参阅 <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/ATI">archWiki 相关内容</a>。</p>
<h4 id="选择驱动"><a href="#选择驱动" class="headerlink" title="选择驱动"></a>选择驱动</h4><p>对于具有核芯显卡的 AMD 处理器，需要先确定核显架构（Architecture）是什么，再决定安装什么驱动。</p>
<p>推荐在 <a target="_blank" rel="noopener" href="https://www.techpowerup.com/">TECHPOWERUP</a> 进行查询，信息非常全面。在确定了显卡架构后，再根据架构对照下表决定安装什么驱动。</p>
<table>
<thead>
<tr>
<th align="center">GPU 架构</th>
<th align="center">Radeon 显卡</th>
<th align="center">开源驱动</th>
<th align="center">非开源驱动</th>
</tr>
</thead>
<tbody><tr>
<td align="center">GCN 4 及之后</td>
<td align="center">多种*</td>
<td align="center">AMDGPU*</td>
<td align="center">AMDGPU PRO*</td>
</tr>
<tr>
<td align="center">GCN 3</td>
<td align="center">多种</td>
<td align="center">AMDGPU</td>
<td align="center">AMDGPU PRO</td>
</tr>
<tr>
<td align="center">GCN 2</td>
<td align="center">多种</td>
<td align="center">AMDGPU&#x2F; ATI*</td>
<td align="center">不支持</td>
</tr>
<tr>
<td align="center">GCN 1</td>
<td align="center">多种</td>
<td align="center">AMDGPU &#x2F; ATI</td>
<td align="center">不支持</td>
</tr>
<tr>
<td align="center">TeraScale 2&amp;3</td>
<td align="center">HD 5000 - HD 6000</td>
<td align="center">ATI</td>
<td align="center">不支持</td>
</tr>
<tr>
<td align="center">TeraScale 1</td>
<td align="center">HD 2000 - HD 4000</td>
<td align="center">ATI</td>
<td align="center">不支持</td>
</tr>
<tr>
<td align="center">旧型号</td>
<td align="center">X1000 及之前</td>
<td align="center">ATI</td>
<td align="center">不支持</td>
</tr>
</tbody></table>
<p>*<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/List_of_AMD_graphics_processing_units">多种</a></p>
<p>*<a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/AMDGPU_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">AMDGPU</a></p>
<p>*<a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/AMDGPU_PRO">AMDGPU PRO</a></p>
<p>*<a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/ATI_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">ATI</a></p>
<p>::: tip ℹ️ 提示</p>
<p>对于 <code>GCN 2.0</code> 及以下架构的老显卡，<strong>直接安装开源 ATI 驱动即可</strong>，原本老旧的闭源 Catalyst 驱动在 2021 年已被废弃。</p>
<p><code>GCN 2.0</code> 及以下架构的老显卡也<strong>不要使用开源 AMPGPU 驱动</strong>，因为其仅处于实验性质，需要各种自定义内核编译选项与配置，非常麻烦、得不偿失。</p>
<p>对于新型号（<code>GCN 3</code> 架构及更新）的核心显卡，<strong>直接安装开源驱动 AMDGPU 即可</strong>。</p>
<p>:::</p>
<p>下面是一些例子：</p>
<ul>
<li><p>你的笔记本 cpu 是目前常见的 AMD Ryzen™ 7 4800U，它的核显为 Vega 8。通过查询，可知其为 <code>GCN 5.0</code> 架构，那么对照上表，你应该安装 AMDGPU 开源驱动。</p>
</li>
<li><p>你的台式机 cpu 是目前常见的 AMD Ryzen™ 5 3400G，它的核显为 Vega 11。通过查询，可知其为 <code>GCN 5.0</code> 架构，那么对照上表，你应该安装 AMDGPU 开源驱动。</p>
</li>
<li><p>再老一些的 7th Gen A10-9700 APU 处理器 ，它的核显为 Radeon R7。通过查询，可知其为 <code>GCN 2.0</code> 架构，那么对照上表，你应该安装 ATI 开源驱动。</p>
</li>
</ul>
<h4 id="安装驱动"><a href="#安装驱动" class="headerlink" title="安装驱动"></a>安装驱动</h4><p>通过以下命令安装如下几个包即可：</p>
<p>:::: code-group<br>::: code-group-item 开源驱动 AMDGPU</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S mesa lib32-mesa xf86-video-amdgpu vulkan-radeon lib32-vulkan-radeon</span><br></pre></td></tr></table></figure>

<p>:::<br>::: code-group-item 开源 ATI 驱动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S mesa lib32-mesa xf86-video-ati</span><br></pre></td></tr></table></figure>

<p>:::<br>::::</p>
<h2 id="独立显卡"><a href="#独立显卡" class="headerlink" title="独立显卡"></a>独立显卡</h2><h3 id="NVIDIA-独立显卡"><a href="#NVIDIA-独立显卡" class="headerlink" title="NVIDIA 独立显卡"></a>NVIDIA 独立显卡</h3><p>::: tip ℹ️ 提示</p>
<p>部分 NVIDIA 独立显卡目前在 archlinux 下体验非常不好，存在以下问题：</p>
<ol>
<li>部分桌面特效（如窗口惯性晃动）很卡</li>
<li>游戏无法正常运行</li>
<li>画面撕裂</li>
</ol>
<p>若遇到了上述问题，建议在 archlinux 中还是单独使用核芯显卡（如果有）吧（还可以节省电量）。如果要 🎮 打游戏不妨重启到 win10。</p>
<p>:::</p>
<p>如有需要可以参阅 <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/NVIDIA_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">archWiki 相关内容</a>。</p>
<ul>
<li>较新型号的独立显卡使用以下命令直接安装如下几个包即可：</li>
</ul>
<p>:::: code-group<br>::: code-group-item linux</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S nvidia nvidia-settings lib32-nvidia-utils <span class="comment"># 必须安装</span></span><br></pre></td></tr></table></figure>

<p>:::<br>::: code-group-item others</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S nvidia-dkms nvidia-settings lib32-nvidia-utils <span class="comment"># 必须安装</span></span><br></pre></td></tr></table></figure>

<p>:::<br>::::</p>
<ul>
<li>如果是 GeForce 630 以下到 GeForce 400 系列的老卡，使用以下命令安装 <a target="_blank" rel="noopener" href="https://aur.archlinux.org/packages/nvidia-390xx-dkms/">nvidia-390xx-dkms</a><sup>aur</sup> 及其 32 位支持包：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S nvidia-390xx-dkms nvidia-settings lib32-nvidia-390xx-utils</span><br></pre></td></tr></table></figure>

<ul>
<li>再老的显卡直接使用以下命令安装 <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Nouveau_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">开源驱动</a> 即可：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S mesa lib32-mesa xf86-video-nouveau</span><br></pre></td></tr></table></figure>

<p>::: tip ℹ️ 提示</p>
<p>安装 NVIDIA 官方的驱动之后，需要编辑 <code>/etc/mkinitcpio.conf</code>，在 <code>HOOKS</code> 一行删除 <code>kms</code> 并保存，然后执行 <code>mkinitcpio -P</code> 重新生成一次镜像。这能防止 initramfs 包含 nouveau 模块，避免 nouveau 和官方驱动的冲突。</p>
<p>:::</p>
<h3 id="AMD-独立显卡"><a href="#AMD-独立显卡" class="headerlink" title="AMD 独立显卡"></a>AMD 独立显卡</h3><p>AMD 独立显卡的驱动安装步骤实际上<strong>和 AMD 核芯显卡是相同的</strong>，都需要先确定架构，然后选定正确的驱动安装即可。参考步骤 <a href="./graphic-driver.md#amd-%E6%A0%B8%E8%8A%AF%E6%98%BE%E5%8D%A1">AMD 核芯显卡</a>。</p>
<h2 id="双显卡（核显-独显）"><a href="#双显卡（核显-独显）" class="headerlink" title="双显卡（核显 + 独显）"></a>双显卡（核显 + 独显）</h2><p>如有需要可以参阅 <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/PRIME_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">archWiki 相关内容</a>。</p>
<h3 id="NVIDIA-独立显卡-1"><a href="#NVIDIA-独立显卡-1" class="headerlink" title="NVIDIA 独立显卡"></a>NVIDIA 独立显卡</h3><p>::: tip ℹ️ 提示</p>
<p>optimus-manager 已经支持 AMD 核芯显卡 + NVIDIA 独立显卡组合。</p>
<p>:::</p>
<p>如有需要可以参考 <a target="_blank" rel="noopener" href="https://github.com/Askannz/optimus-manager/wiki">optimus-manager 官方文档</a>。</p>
<p>同时拥有核芯显卡与独立显卡的笔记本电脑，同样需要<strong>按照上述步骤先安装各个对应的软件包</strong>。除此之外还需要安装 optimus-manager<sup>cn &#x2F; aur</sup> 以及其图形前端 optimus-manager-qt<sup>aur</sup>。通过该程序可以在核芯显卡和独立显卡间轻松切换。optimus-manager 提供三种模式 —— 分别为仅用独显、仅用核显以及 hybrid 动态切换模式。</p>
<ol>
<li>使用以下命令安装相关软件包：</li>
</ol>
<p>:::: code-group<br>::: code-group-item cn</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S optimus-manager optimus-manager-qt</span><br></pre></td></tr></table></figure>

<p>:::<br>::: code-group-item aur</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S aur/optimus-manager optimus-manager-qt</span><br></pre></td></tr></table></figure>

<p>:::<br>::::</p>
<ol start="2">
<li>安装完成后重启即可使用。optimus-manager 安装完成后会默认设置 <code>optimus-manager.service</code> 服务自动启动，但建议还是通过以下命令手动设置一下：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> optimus-manager.service</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>重启后在在菜单栏打开 optimus-manager 即可使用。可在其设置中设置开机自动启动：</li>
</ol>
<p><img src="/../static/rookie/graphic-driver/optimus-manager-1.png" alt="optimus-manager-1"></p>
<p>此时你应该已经可以进行显卡切换了。</p>
<p>::: tip ℹ️ 提示</p>
<p>如果有问题，请详细阅读 optimus-manager 的文档，里面有详细的描述。由于各类问题太多，本文不再赘述。此处仅列出几项较为重要的注意事项:</p>
<ul>
<li>如果需要在独显和核显模式间切换，要注意你没安装各类 GPU 监控插件，它们会阻止显卡切换，导致不可预料的错误</li>
<li>不要使用 Nvidia Control Panel 中的 <code>Save to X Configuration file</code> ，会导致配置冲突</li>
<li>在显卡之间的切换时，重新登陆后如在 splash screen 卡住或者黑屏，可以尝试按照上述提示在 <code>tty1 ~ tty6</code> 之间进行切换</li>
</ul>
<p>:::</p>
<h4 id="动态切换"><a href="#动态切换" class="headerlink" title="动态切换"></a>动态切换</h4><p>::: tip ℹ️ 提示</p>
<p>hybrid 动态切换模式并不是自动的（类似 win10），需要手动添加环境变量。</p>
<p>:::</p>
<p>hybrid 动态切换模式本质上是使用<strong>针对使用闭源驱动</strong>的双显卡 <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/PRIME#PRIME_render_offload">PRIME</a> 方法进行切换 —— 这需要设置三个环境变量。有两种方法：</p>
<ol>
<li><p>通过命令手动添加前缀，也可直接添加环境变量在全局环境下（不推荐）。如果加在了全局环境中，在从 hybrid 动态切换模式切换到其他模式之前一定要去掉这三个环境变量，否则会黑屏</p>
</li>
<li><p>用 nvidia-prime 包提供的命令 <code>prime-run</code></p>
</li>
</ol>
<h5 id="prime-run-方法"><a href="#prime-run-方法" class="headerlink" title="prime-run 方法"></a>prime-run 方法</h5><p>::: tip ℹ️ 提示</p>
<p><code>prime-run</code> 部分应用可以不需要安装 optimus-manager，直接运行。</p>
<p>但不推荐这样，因为除了部分应用会报错之外也无法使用仅独立显卡模式。</p>
<p>:::</p>
<ol>
<li>通过以下命令安装 nvidia-prime 包：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S nvidia-prime</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>通过以下命令（请将 <code>%command%</code> 替换为要运行的命令）以使用 NVIDIA 独立显卡运行程序：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">prime-run %<span class="built_in">command</span>%</span><br></pre></td></tr></table></figure>

<p>运行 steam 游戏的例子：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">prime-run steam steam://rungameid/570 <span class="comment"># 运行 Dota 2</span></span><br><span class="line">prime-run steam steam://rungameid/730 <span class="comment"># 运行 CS:GO</span></span><br></pre></td></tr></table></figure>

<p>::: tip ℹ️ 提示</p>
<p>steam 游戏的启动参数 <code>steam://rungameid/xxx</code> 可通过以下方式查找：</p>
<ol>
<li>右键需要运行的游戏图标 &gt; 点击 <code>编辑应用程序...</code>：</li>
</ol>
<p><img src="/../static/rookie/graphic-driver/steam-id-1.png" alt="steam-id\_step-1"></p>
<ol start="2">
<li>在 <code>应用程序</code> 选项卡 &gt; <code>命令</code> 处查看：</li>
</ol>
<p><img src="/../static/rookie/graphic-driver/steam-id-2.png" alt="steam-id\_step-2"></p>
<p>:::</p>
<h5 id="环境变量方法"><a href="#环境变量方法" class="headerlink" title="环境变量方法"></a>环境变量方法</h5><h6 id="手动输入"><a href="#手动输入" class="headerlink" title="手动输入"></a>手动输入</h6><p>通过以下命令（请将 <code>%command%</code> 替换为要运行的命令）以使用 NVIDIA 独立显卡运行程序：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__NV_PRIME_RENDER_OFFLOAD=1 __GLX_VENDOR_LIBRARY_NAME=<span class="string">&quot;nvidia&quot;</span> __VK_LAYER_NV_optimus=<span class="string">&quot;NVIDIA_only&quot;</span> %<span class="built_in">command</span>%</span><br></pre></td></tr></table></figure>

<p>运行 steam 游戏的例子：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">__NV_PRIME_RENDER_OFFLOAD=1 __GLX_VENDOR_LIBRARY_NAME=<span class="string">&quot;nvidia&quot;</span> __VK_LAYER_NV_optimus=<span class="string">&quot;NVIDIA_only&quot;</span>  steam steam://rungameid/570 <span class="comment"># 运行 Dota 2</span></span><br><span class="line">__NV_PRIME_RENDER_OFFLOAD=1 __GLX_VENDOR_LIBRARY_NAME=<span class="string">&quot;nvidia&quot;</span> __VK_LAYER_NV_optimus=<span class="string">&quot;NVIDIA_only&quot;</span>  steam steam://rungameid/730 <span class="comment"># 运行 CS:GO</span></span><br></pre></td></tr></table></figure>

<h6 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h6><p>::: warning ⚠️ 注意</p>
<p><a target="_blank" rel="noopener" href="https://github.com/Askannz/optimus-manager/wiki/Nvidia-GPU-offloading-for-%22hybrid%22-mode#setup">optimus-manager 官方文档</a> 中不推荐将此环境变量添加到全局环境。</p>
<p><em>It is not recommended to set those variables system-wide (like in <code>/etc/environment</code>), since it would defeat the point of hybrid mode, and can also break desktop compositing on some environment (resulting in a black screen).</em></p>
<p>也就是说会遇到这些问题：</p>
<ol>
<li>Kwin &#x2F; 显示特效混合器（混成器）奔溃（毛玻璃效果消失，原本是透明或毛玻璃效果的背景变黑）</li>
<li>黑屏</li>
</ol>
<p>:::</p>
<ol>
<li>使用 <code>vim</code> 编辑 <code>/etc/environment</code> 文件：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/environment</span><br></pre></td></tr></table></figure>

<p>加入以下内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">__NV_PRIME_RENDER_OFFLOAD=1</span><br><span class="line">__GLX_VENDOR_LIBRARY_NAME=<span class="string">&quot;nvidia&quot;</span></span><br><span class="line">__VK_LAYER_NV_optimus=<span class="string">&quot;NVIDIA_only&quot;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>保存并退出 <code>vim</code></li>
</ol>
<h4 id="电源管理"><a href="#电源管理" class="headerlink" title="电源管理"></a>电源管理</h4><p>::: tip ℹ️ 提示</p>
<p>如果不是强烈追求能效控制以及注重电池寿命的用户，那么可以略过此段。配置电源管理需要针对你的硬件以及笔记本型号尝试正确的电源管理方式。</p>
<p>此部分的设置可能导致黑屏，并且尝试过程可能较长，也可能会遇到各类问题。请根据自身需求和能力选择是否操作。</p>
<p>:::</p>
<p>电源管理做的事情是，<strong>在只用核显的模式下，确保正确关闭独立显卡</strong>；而在混合模式下，绝大多数情况下 NVIDIA 模块实际是始终开启的，<strong>电源管理并不生效</strong>。</p>
<p>这件事情其实很复杂，因为对于不同的显卡型号，以及笔记本型号的组合，可行的方案都是不同的。笼统来说，最广泛适用的办法是 Bbswitch。但<strong>不建议上来就按照此方式安装使用</strong>，因为某些特定的硬件就是会出问题（黑屏）。</p>
<p>建议按照 <a target="_blank" rel="noopener" href="https://github.com/Askannz/optimus-manager/wiki/A-guide--to-power-management-options">optimus-manager 官方文档</a> 一步步尝试，最后找到属于你自己电脑合适的电源管理方式。<strong>此文档必须详细阅读！</strong></p>
<p>针对大多数笔记本适用的 Bbswitch，此处进行安装使用的讲解。</p>
<ol>
<li>通过以下命令安装包 <code>bbswitch</code>；若使用其它内核，则安装包 <code>bbswitch-dkms</code>：</li>
</ol>
<p>:::: code-group<br>::: code-group-item linux</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S bbswitch</span><br></pre></td></tr></table></figure>

<p>:::<br>::: code-group-item others</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S bbswitch-dkms</span><br></pre></td></tr></table></figure>

<p>:::<br>::::</p>
<ol start="2">
<li>右键 optimus-manager 的托盘图标 &gt; 点击 <code>设置</code> &gt; 在 Optimus 选项卡中的 <code>switch method</code> 中选择 <code>Bbswitch</code> 即可：</li>
</ol>
<p><img src="/../static/rookie/graphic-driver/bbswitch.png" alt="Bbswitch"></p>
<ol start="3">
<li>重启之后，若使用仅核显模式使用如下命令验证 NVIDIA 独立显卡是否被禁用：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci | grep NVIDIA</span><br></pre></td></tr></table></figure>

<p><img src="/../static/rookie/graphic-driver/off-check.png" alt="off-check"></p>
<p>若有 <code>rev ff</code> 字样，则表示独显已经成功禁用。</p>
<h3 id="AMD-独立显卡-1"><a href="#AMD-独立显卡-1" class="headerlink" title="AMD 独立显卡"></a>AMD 独立显卡</h3><p>虽然 AMD 独立显卡无法使用 optimus-manager，但可以使用<strong>针对使用开源驱动</strong>的双显卡 <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/PRIME#For_open_source_drivers_-_PRIME">PRIME</a> 方法进行切换。也就是使用 <code>DRI_PRIME=1</code> 前缀使用独立显卡（可能还更简单了？🤔）。</p>
<ul>
<li>通过以下命令（请将 <code>%command%</code> 替换为要运行的命令）以使用 AMD 独立显卡运行程序：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DRI_PRIME=1 %<span class="built_in">command</span>%</span><br></pre></td></tr></table></figure>

<p>运行 steam 游戏的例子：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DRI_PRIME=1 steam steam://rungameid/570 <span class="comment"># 运行 Dota 2</span></span><br><span class="line">DRI_PRIME=1 steam steam://rungameid/730 <span class="comment"># 运行 CS:GO</span></span><br></pre></td></tr></table></figure>

<ul>
<li>可以使用以下命令分别对核芯显卡和独立显卡进行性能测试，选择分数更高的一个使用：</li>
</ul>
<p>:::: code-group<br>::: code-group-item 核芯显卡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">glmark2</span><br></pre></td></tr></table></figure>

<p>:::<br>::: code-group-item 独立显卡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DRI_PRIME=1 glmark2</span><br></pre></td></tr></table></figure>

<p>:::<br>::::</p>
<p>关于 glmark2 的说明请参阅 <a href="./graphic-driver.md#glmark2">glmark2</a>。</p>
<ul>
<li>可以在 steam 游戏的启动前缀中加入 <code>DRI_PRIME=1 mangohud %command%</code> 来使用独显的同时显示帧数等信息。关于 <a target="_blank" rel="noopener" href="https://aur.archlinux.org/packages/mangohud">mangohud</a><sup>aur</sup> 的使用请参阅 <a href="">这里</a>。</li>
</ul>
<h2 id="性能测试"><a href="#性能测试" class="headerlink" title="性能测试"></a>性能测试</h2><p>如有需要可以参考 <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Benchmarking_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">archWiki 相关内容</a>。</p>
<h3 id="glxgears"><a href="#glxgears" class="headerlink" title="glxgears"></a>glxgears</h3><p>最传统和广为人知的方式是使用 <code>glxgears</code> 命令进行测试，其属于 <a target="_blank" rel="noopener" href="https://www.archlinux.org/packages/extra/x86_64/mesa-utils/">mesa-utils</a> 包。</p>
<ol>
<li>通过以下命令安装 <a target="_blank" rel="noopener" href="https://www.archlinux.org/packages/extra/x86_64/mesa-utils/">mesa-utils</a> 包（可能已经安装了）：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S mesa-utils</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>通过以下命令进行测试：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">glxgears</span><br></pre></td></tr></table></figure>

<p>随后会弹出一个小窗口运行测试程序：</p>
<p><img src="/../static/rookie/graphic-driver/glxgears-1.png" alt="glxgears-1"></p>
<p>帧数会打印在终端中：</p>
<p><img src="/../static/rookie/graphic-driver/glxgears-2.png" alt="glxgears-2"></p>
<ol start="3">
<li>使用 <code>Ctrl</code> + <code>C</code> 退出测试</li>
</ol>
<p><code>glxgears</code> 仅仅只能提供简单的测试场景及帧数显示，只测试了当前 OpenGL 功能的一小部分，功能明显不足。笔者推荐如下两种工具。</p>
<h3 id="glmark2"><a href="#glmark2" class="headerlink" title="glmark2"></a>glmark2</h3><p>glmark2 提供了一系列丰富的测试，涉及图形单元性能（缓冲、建筑、照明、纹理等）的不同方面，允许进行更全面和有意义的测试。每次测试单独计算帧速率。最终，程序根据之前的所有测试给出一个最终分数。在 archlinux 上属于包 <a target="_blank" rel="noopener" href="https://aur.archlinux.org/packages/glmark2/">glmark2</a><sup>cn &#x2F; aur</sup>。</p>
<ol>
<li>使用以下命令安装 glmark2：</li>
</ol>
<p>:::: code-group<br>::: code-group-item cn</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S glmark2</span><br></pre></td></tr></table></figure>

<p>:::<br>::: code-group-item aur</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S aur/glmark2</span><br></pre></td></tr></table></figure>

<p>:::<br>::::</p>
<ol start="2">
<li>使用以下命令启动 glmark2：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">glmark2</span><br></pre></td></tr></table></figure>

<p>随后会弹出一个小窗口运行测试程序：</p>
<p><img src="/../static/rookie/graphic-driver/glmark2-1.png" alt="glmark2-1"></p>
<p>以笔者的硬件为例（核芯显卡），测试结果如下：</p>
<p><img src="/../static/rookie/graphic-driver/glmark2-2.png" alt="glmark2-2"></p>
<h3 id="Unigine-benchmark"><a href="#Unigine-benchmark" class="headerlink" title="Unigine benchmark"></a>Unigine benchmark</h3><p>Unigine 3D 引擎是一个更全面的基准测试工具。截止目前有五个版本，从新到旧分别是：</p>
<ul>
<li>superposition<sup>EULA</sup>（2017）</li>
<li>valley<sup>EULA</sup>（2013）</li>
<li>heaven<sup>EULA</sup>（2009）</li>
<li>tropics<sup>EULA</sup>（2008）</li>
<li>sanctuary<sup>EULA</sup>（2007）</li>
</ul>
<ol>
<li>可以使用以下命令从 <a target="_blank" rel="noopener" href="https://aur.archlinux.org/packages/?O=0&K=unigine">AUR</a> 下载全部版本（选一个即可）：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yay -S unigine-superposition</span><br><span class="line">yay -S unigine-valley</span><br><span class="line">yay -S unigine-heaven</span><br><span class="line">yay -S unigine-tropics</span><br><span class="line">yay -S unigine-sanctuary</span><br></pre></td></tr></table></figure>

<p><img src="/../static/rookie/graphic-driver/unigine-heaven-1.png" alt="unigine-heaven\_step-1"></p>
<ol start="2">
<li>使用以下命令启动 Unigine benchmark（输入对应安装的版本）：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">unigine-superposition</span><br><span class="line">unigine-valley</span><br><span class="line">unigine-heaven</span><br><span class="line">unigine-tropics</span><br><span class="line">unigine-sanctuary</span><br></pre></td></tr></table></figure>

<p><img src="/../static/rookie/graphic-driver/unigine-heaven-2.png" alt="unigine-heaven\_step-2"></p>
<ol start="3">
<li><p>调整参数后，点击 <code>RUN</code> 即可进入测试，帧数会显示在右上角</p>
</li>
<li><p>点击左上角 <code>基准</code> 开始基准测试</p>
</li>
<li><p>点击左上角 <code>退出</code> 并 <code>确定</code> 即可退出测试</p>
</li>
</ol>
<p>此基准测试工具拥有实时的环境遮挡、来自不同来源的相互关联的灯光、HDR 效果图、逼真的水和具有大气光散射的动态天空。此外还可以设置抗锯齿级别、纹理质量和滤波、各向异性和着色器质量。</p>
<h2 id="显卡信息查看"><a href="#显卡信息查看" class="headerlink" title="显卡信息查看"></a>显卡信息查看</h2><h3 id="NVIDIA-独立显卡-2"><a href="#NVIDIA-独立显卡-2" class="headerlink" title="NVIDIA 独立显卡"></a>NVIDIA 独立显卡</h3><p><code>nvidia-settings</code> 这个包即可全面的展示显卡相关信息（在步骤 <a href="./graphic-driver.md#%E7%8B%AC%E7%AB%8B%E6%98%BE%E5%8D%A1">NVIDIA 独立显卡</a> 中已经安装）。</p>
<h3 id="AMD-独立显卡-x2F-核芯显卡"><a href="#AMD-独立显卡-x2F-核芯显卡" class="headerlink" title="AMD 独立显卡 &#x2F; 核芯显卡"></a>AMD 独立显卡 &#x2F; 核芯显卡</h3><ol>
<li>通过以下命令安装 <a target="_blank" rel="noopener" href="https://aur.archlinux.org/packages/?O=0&SeB=nd&K=radeon-profile-git&outdated=&SB=n&SO=a&PP=50&do_Search=Go">radeon-profile-git</a><sup>aur</sup> 包以及其依赖 <a target="_blank" rel="noopener" href="https://aur.archlinux.org/packages/?O=0&SeB=nd&K=radeon-profile-daemon-git&outdated=&SB=n&SO=a&PP=50&do_Search=Go">radeon-profile-daemon-git</a><sup>aur</sup>：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S radeon-profile-git radeon-profile-daemon-git</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>使用以下命令启动这个进程，即可以图形化的方式查看 AMD 显卡信息：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> --now radeon-profile-daemon.service</span><br></pre></td></tr></table></figure>

<p>::: tip ℹ️ 提示</p>
<p>不要对左下角的 <code>auto low high</code> 进行更改，有 bug 会导致卡死。</p>
<p>同时，显存占用在某些型号显卡上展示可能有误。</p>
<p>:::</p>
</article><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/02/01/a8192b3e5320435fbea55b6d9444937d/" title="basic-install"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">basic-install</div></div></a></div><div class="next-post pull-right"><a href="/2023/02/01/afb71ec763424ee9a459b83fc80b79c5/" title="desktop-env-and-app"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">desktop-env-and-app</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#archlinux-%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8"><span class="toc-number">1.</span> <span class="toc-text">archlinux 显卡驱动</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%AA%81-%E6%8E%A5%E5%A4%A9%E8%8E%B2%E5%8F%B6%E6%97%A0%E7%A9%B7%E7%A2%A7%EF%BC%8C%E6%98%A0%E6%97%A5%E8%8D%B7%E8%8A%B1%E5%88%AB%E6%A0%B7%E7%BA%A2"><span class="toc-number">1.0.1.</span> <span class="toc-text">🪁 接天莲叶无穷碧，映日荷花别样红</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%94%96-%E8%BF%99%E4%B8%80%E8%8A%82%E5%B0%86%E4%BC%9A%E8%AE%A8%E8%AE%BA%EF%BC%9A"><span class="toc-number">1.0.2.</span> <span class="toc-text">🔖 这一节将会讨论：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%B8%E8%8A%AF%E6%98%BE%E5%8D%A1"><span class="toc-number">1.1.</span> <span class="toc-text">核芯显卡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Intel-%E6%A0%B8%E8%8A%AF%E6%98%BE%E5%8D%A1"><span class="toc-number">1.1.1.</span> <span class="toc-text">Intel 核芯显卡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AMD-%E6%A0%B8%E8%8A%AF%E6%98%BE%E5%8D%A1"><span class="toc-number">1.1.2.</span> <span class="toc-text">AMD 核芯显卡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E9%A9%B1%E5%8A%A8"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">选择驱动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E9%A9%B1%E5%8A%A8"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">安装驱动</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8B%AC%E7%AB%8B%E6%98%BE%E5%8D%A1"><span class="toc-number">1.2.</span> <span class="toc-text">独立显卡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#NVIDIA-%E7%8B%AC%E7%AB%8B%E6%98%BE%E5%8D%A1"><span class="toc-number">1.2.1.</span> <span class="toc-text">NVIDIA 独立显卡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AMD-%E7%8B%AC%E7%AB%8B%E6%98%BE%E5%8D%A1"><span class="toc-number">1.2.2.</span> <span class="toc-text">AMD 独立显卡</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%8C%E6%98%BE%E5%8D%A1%EF%BC%88%E6%A0%B8%E6%98%BE-%E7%8B%AC%E6%98%BE%EF%BC%89"><span class="toc-number">1.3.</span> <span class="toc-text">双显卡（核显 + 独显）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#NVIDIA-%E7%8B%AC%E7%AB%8B%E6%98%BE%E5%8D%A1-1"><span class="toc-number">1.3.1.</span> <span class="toc-text">NVIDIA 独立显卡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E5%88%87%E6%8D%A2"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">动态切换</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#prime-run-%E6%96%B9%E6%B3%95"><span class="toc-number">1.3.1.1.1.</span> <span class="toc-text">prime-run 方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E6%96%B9%E6%B3%95"><span class="toc-number">1.3.1.1.2.</span> <span class="toc-text">环境变量方法</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E8%BE%93%E5%85%A5"><span class="toc-number">1.3.1.1.2.1.</span> <span class="toc-text">手动输入</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F"><span class="toc-number">1.3.1.1.2.2.</span> <span class="toc-text">全局变量</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%B5%E6%BA%90%E7%AE%A1%E7%90%86"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">电源管理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AMD-%E7%8B%AC%E7%AB%8B%E6%98%BE%E5%8D%A1-1"><span class="toc-number">1.3.2.</span> <span class="toc-text">AMD 独立显卡</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95"><span class="toc-number">1.4.</span> <span class="toc-text">性能测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#glxgears"><span class="toc-number">1.4.1.</span> <span class="toc-text">glxgears</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#glmark2"><span class="toc-number">1.4.2.</span> <span class="toc-text">glmark2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Unigine-benchmark"><span class="toc-number">1.4.3.</span> <span class="toc-text">Unigine benchmark</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%98%BE%E5%8D%A1%E4%BF%A1%E6%81%AF%E6%9F%A5%E7%9C%8B"><span class="toc-number">1.5.</span> <span class="toc-text">显卡信息查看</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#NVIDIA-%E7%8B%AC%E7%AB%8B%E6%98%BE%E5%8D%A1-2"><span class="toc-number">1.5.1.</span> <span class="toc-text">NVIDIA 独立显卡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AMD-%E7%8B%AC%E7%AB%8B%E6%98%BE%E5%8D%A1-x2F-%E6%A0%B8%E8%8A%AF%E6%98%BE%E5%8D%A1"><span class="toc-number">1.5.2.</span> <span class="toc-text">AMD 独立显卡 &#x2F; 核芯显卡</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://meowrain.cn">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div></div></body></html>